{
  "openapi": "3.0.2",
  "info": {
    "title": "HashiCorp Vault API",
    "description": "HTTP API that gives you full access to Vault. All API routes are prefixed with `/v1/`.",
    "version": "1.13.0",
    "license": {
      "name": "Mozilla Public License 2.0",
      "url": "https://www.mozilla.org/en-US/MPL/2.0"
    }
  },
  "paths": {
    "/code/{name}": {
      "description": "Request time-based one-time use password or validate a password for a certain key .",
      "parameters": [
        {
          "name": "name",
          "description": "Name of the key.",
          "in": "path",
          "schema": {
            "type": "string"
          },
          "required": true
        }
      ],
      "get": {
        "summary": "Request time-based one-time use password or validate a password for a certain key .",
        "tags": [
          "secrets"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "summary": "Request time-based one-time use password or validate a password for a certain key .",
        "tags": [
          "secrets"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CodeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/keys": {
      "description": "Manage the keys that can be created with this backend.",
      "get": {
        "summary": "Manage the keys that can be created with this backend.",
        "tags": [
          "secrets"
        ],
        "parameters": [
          {
            "name": "list",
            "description": "Must be set to `true`",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "true"
              ]
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/keys/{name}": {
      "description": "Manage the keys that can be created with this backend.",
      "parameters": [
        {
          "name": "name",
          "description": "Name of the key.",
          "in": "path",
          "schema": {
            "type": "string"
          },
          "required": true
        }
      ],
      "get": {
        "summary": "Manage the keys that can be created with this backend.",
        "tags": [
          "secrets"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "summary": "Manage the keys that can be created with this backend.",
        "tags": [
          "secrets"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KeysRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "summary": "Manage the keys that can be created with this backend.",
        "tags": [
          "secrets"
        ],
        "responses": {
          "204": {
            "description": "empty body"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CodeRequest": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "TOTP code to be validated."
          }
        }
      },
      "KeysRequest": {
        "type": "object",
        "properties": {
          "account_name": {
            "type": "string",
            "description": "The name of the account associated with the key. Required if generate is true."
          },
          "algorithm": {
            "type": "string",
            "description": "The hashing algorithm used to generate the TOTP token. Options include SHA1, SHA256 and SHA512.",
            "default": "SHA1"
          },
          "digits": {
            "type": "integer",
            "description": "The number of digits in the generated TOTP token. This value can either be 6 or 8.",
            "default": 6
          },
          "exported": {
            "type": "boolean",
            "description": "Determines if a QR code and url are returned upon generating a key. Only used if generate is true.",
            "default": true
          },
          "generate": {
            "type": "boolean",
            "description": "Determines if a key should be generated by Vault or if a key is being passed from another service.",
            "default": false
          },
          "issuer": {
            "type": "string",
            "description": "The name of the key's issuing organization. Required if generate is true."
          },
          "key": {
            "type": "string",
            "description": "The shared master key used to generate a TOTP token. Only used if generate is false."
          },
          "key_size": {
            "type": "integer",
            "description": "Determines the size in bytes of the generated key. Only used if generate is true.",
            "default": 20
          },
          "period": {
            "type": "integer",
            "description": "The length of time used to generate a counter for the TOTP token calculation.",
            "format": "seconds",
            "default": 30
          },
          "qr_size": {
            "type": "integer",
            "description": "The pixel size of the generated square QR code. Only used if generate is true and exported is true. If this value is 0, a QR code will not be returned.",
            "default": 200
          },
          "skew": {
            "type": "integer",
            "description": "The number of delay periods that are allowed when validating a TOTP token. This value can either be 0 or 1. Only used if generate is true.",
            "default": 1
          },
          "url": {
            "type": "string",
            "description": "A TOTP url string containing all of the parameters for key setup. Only used if generate is false."
          }
        }
      }
    }
  }
}
